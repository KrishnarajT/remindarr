[
    {
        "label": "runpy",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "runpy",
        "description": "runpy",
        "detail": "runpy",
        "documentation": {}
    },
    {
        "label": "annotations",
        "importPath": "__future__",
        "description": "__future__",
        "isExtraImport": true,
        "detail": "__future__",
        "documentation": {}
    },
    {
        "label": "os",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "os",
        "description": "os",
        "detail": "os",
        "documentation": {}
    },
    {
        "label": "site",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "site",
        "description": "site",
        "detail": "site",
        "documentation": {}
    },
    {
        "label": "sys",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "sys",
        "description": "sys",
        "detail": "sys",
        "documentation": {}
    },
    {
        "label": "load_dotenv",
        "importPath": "dotenv",
        "description": "dotenv",
        "isExtraImport": true,
        "detail": "dotenv",
        "documentation": {}
    },
    {
        "label": "BaseSettings",
        "importPath": "pydantic_settings",
        "description": "pydantic_settings",
        "isExtraImport": true,
        "detail": "pydantic_settings",
        "documentation": {}
    },
    {
        "label": "SettingsConfigDict",
        "importPath": "pydantic_settings",
        "description": "pydantic_settings",
        "isExtraImport": true,
        "detail": "pydantic_settings",
        "documentation": {}
    },
    {
        "label": "BaseModel",
        "importPath": "pydantic",
        "description": "pydantic",
        "isExtraImport": true,
        "detail": "pydantic",
        "documentation": {}
    },
    {
        "label": "Field",
        "importPath": "pydantic",
        "description": "pydantic",
        "isExtraImport": true,
        "detail": "pydantic",
        "documentation": {}
    },
    {
        "label": "text",
        "importPath": "sqlalchemy",
        "description": "sqlalchemy",
        "isExtraImport": true,
        "detail": "sqlalchemy",
        "documentation": {}
    },
    {
        "label": "Column",
        "importPath": "sqlalchemy",
        "description": "sqlalchemy",
        "isExtraImport": true,
        "detail": "sqlalchemy",
        "documentation": {}
    },
    {
        "label": "DateTime",
        "importPath": "sqlalchemy",
        "description": "sqlalchemy",
        "isExtraImport": true,
        "detail": "sqlalchemy",
        "documentation": {}
    },
    {
        "label": "func",
        "importPath": "sqlalchemy",
        "description": "sqlalchemy",
        "isExtraImport": true,
        "detail": "sqlalchemy",
        "documentation": {}
    },
    {
        "label": "SQLModel",
        "importPath": "sqlmodel",
        "description": "sqlmodel",
        "isExtraImport": true,
        "detail": "sqlmodel",
        "documentation": {}
    },
    {
        "label": "create_engine",
        "importPath": "sqlmodel",
        "description": "sqlmodel",
        "isExtraImport": true,
        "detail": "sqlmodel",
        "documentation": {}
    },
    {
        "label": "Session",
        "importPath": "sqlmodel",
        "description": "sqlmodel",
        "isExtraImport": true,
        "detail": "sqlmodel",
        "documentation": {}
    },
    {
        "label": "SQLModel",
        "importPath": "sqlmodel",
        "description": "sqlmodel",
        "isExtraImport": true,
        "detail": "sqlmodel",
        "documentation": {}
    },
    {
        "label": "Field",
        "importPath": "sqlmodel",
        "description": "sqlmodel",
        "isExtraImport": true,
        "detail": "sqlmodel",
        "documentation": {}
    },
    {
        "label": "select",
        "importPath": "sqlmodel",
        "description": "sqlmodel",
        "isExtraImport": true,
        "detail": "sqlmodel",
        "documentation": {}
    },
    {
        "label": "select",
        "importPath": "sqlmodel",
        "description": "sqlmodel",
        "isExtraImport": true,
        "detail": "sqlmodel",
        "documentation": {}
    },
    {
        "label": "select",
        "importPath": "sqlmodel",
        "description": "sqlmodel",
        "isExtraImport": true,
        "detail": "sqlmodel",
        "documentation": {}
    },
    {
        "label": "Settings",
        "importPath": "app.constants.constants",
        "description": "app.constants.constants",
        "isExtraImport": true,
        "detail": "app.constants.constants",
        "documentation": {}
    },
    {
        "label": "Settings",
        "importPath": "app.constants.constants",
        "description": "app.constants.constants",
        "isExtraImport": true,
        "detail": "app.constants.constants",
        "documentation": {}
    },
    {
        "label": "settings",
        "importPath": "app.constants.constants",
        "description": "app.constants.constants",
        "isExtraImport": true,
        "detail": "app.constants.constants",
        "documentation": {}
    },
    {
        "label": "settings",
        "importPath": "app.constants.constants",
        "description": "app.constants.constants",
        "isExtraImport": true,
        "detail": "app.constants.constants",
        "documentation": {}
    },
    {
        "label": "settings",
        "importPath": "app.constants.constants",
        "description": "app.constants.constants",
        "isExtraImport": true,
        "detail": "app.constants.constants",
        "documentation": {}
    },
    {
        "label": "uuid",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "uuid",
        "description": "uuid",
        "detail": "uuid",
        "documentation": {}
    },
    {
        "label": "datetime",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "datetime",
        "description": "datetime",
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "timedelta",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "timedelta",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "timezone",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "datetime",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "timedelta",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "Optional",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "Optional",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "Tuple",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "Optional",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "APIRouter",
        "importPath": "fastapi",
        "description": "fastapi",
        "isExtraImport": true,
        "detail": "fastapi",
        "documentation": {}
    },
    {
        "label": "Request",
        "importPath": "fastapi",
        "description": "fastapi",
        "isExtraImport": true,
        "detail": "fastapi",
        "documentation": {}
    },
    {
        "label": "Depends",
        "importPath": "fastapi",
        "description": "fastapi",
        "isExtraImport": true,
        "detail": "fastapi",
        "documentation": {}
    },
    {
        "label": "APIRouter",
        "importPath": "fastapi",
        "description": "fastapi",
        "isExtraImport": true,
        "detail": "fastapi",
        "documentation": {}
    },
    {
        "label": "Request",
        "importPath": "fastapi",
        "description": "fastapi",
        "isExtraImport": true,
        "detail": "fastapi",
        "documentation": {}
    },
    {
        "label": "Depends",
        "importPath": "fastapi",
        "description": "fastapi",
        "isExtraImport": true,
        "detail": "fastapi",
        "documentation": {}
    },
    {
        "label": "HTTPException",
        "importPath": "fastapi",
        "description": "fastapi",
        "isExtraImport": true,
        "detail": "fastapi",
        "documentation": {}
    },
    {
        "label": "FastAPI",
        "importPath": "fastapi",
        "description": "fastapi",
        "isExtraImport": true,
        "detail": "fastapi",
        "documentation": {}
    },
    {
        "label": "Request",
        "importPath": "fastapi",
        "description": "fastapi",
        "isExtraImport": true,
        "detail": "fastapi",
        "documentation": {}
    },
    {
        "label": "Session",
        "importPath": "sqlalchemy.orm",
        "description": "sqlalchemy.orm",
        "isExtraImport": true,
        "detail": "sqlalchemy.orm",
        "documentation": {}
    },
    {
        "label": "Session",
        "importPath": "sqlalchemy.orm",
        "description": "sqlalchemy.orm",
        "isExtraImport": true,
        "detail": "sqlalchemy.orm",
        "documentation": {}
    },
    {
        "label": "app.db.config_db",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "app.db.config_db",
        "description": "app.db.config_db",
        "detail": "app.db.config_db",
        "documentation": {}
    },
    {
        "label": "get_session",
        "importPath": "app.db.config_db",
        "description": "app.db.config_db",
        "isExtraImport": true,
        "detail": "app.db.config_db",
        "documentation": {}
    },
    {
        "label": "get_session",
        "importPath": "app.db.config_db",
        "description": "app.db.config_db",
        "isExtraImport": true,
        "detail": "app.db.config_db",
        "documentation": {}
    },
    {
        "label": "Reminders",
        "importPath": "app.db.models",
        "description": "app.db.models",
        "isExtraImport": true,
        "detail": "app.db.models",
        "documentation": {}
    },
    {
        "label": "Users",
        "importPath": "app.db.models",
        "description": "app.db.models",
        "isExtraImport": true,
        "detail": "app.db.models",
        "documentation": {}
    },
    {
        "label": "Users",
        "importPath": "app.db.models",
        "description": "app.db.models",
        "isExtraImport": true,
        "detail": "app.db.models",
        "documentation": {}
    },
    {
        "label": "Reminders",
        "importPath": "app.db.models",
        "description": "app.db.models",
        "isExtraImport": true,
        "detail": "app.db.models",
        "documentation": {}
    },
    {
        "label": "Users",
        "importPath": "app.db.models",
        "description": "app.db.models",
        "isExtraImport": true,
        "detail": "app.db.models",
        "documentation": {}
    },
    {
        "label": "send_message",
        "importPath": "app.services.telegram",
        "description": "app.services.telegram",
        "isExtraImport": true,
        "detail": "app.services.telegram",
        "documentation": {}
    },
    {
        "label": "send_message",
        "importPath": "app.services.telegram",
        "description": "app.services.telegram",
        "isExtraImport": true,
        "detail": "app.services.telegram",
        "documentation": {}
    },
    {
        "label": "send_message",
        "importPath": "app.services.telegram",
        "description": "app.services.telegram",
        "isExtraImport": true,
        "detail": "app.services.telegram",
        "documentation": {}
    },
    {
        "label": "logger",
        "importPath": "app.utils.logging_utils",
        "description": "app.utils.logging_utils",
        "isExtraImport": true,
        "detail": "app.utils.logging_utils",
        "documentation": {}
    },
    {
        "label": "logger",
        "importPath": "app.utils.logging_utils",
        "description": "app.utils.logging_utils",
        "isExtraImport": true,
        "detail": "app.utils.logging_utils",
        "documentation": {}
    },
    {
        "label": "logger",
        "importPath": "app.utils.logging_utils",
        "description": "app.utils.logging_utils",
        "isExtraImport": true,
        "detail": "app.utils.logging_utils",
        "documentation": {}
    },
    {
        "label": "parse_time_unit",
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "isExtraImport": true,
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "calculate_next_trigger",
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "isExtraImport": true,
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "format_datetime_for_user",
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "isExtraImport": true,
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "calculate_next_trigger",
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "isExtraImport": true,
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "parse_time_unit",
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "isExtraImport": true,
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "JSONResponse",
        "importPath": "fastapi.responses",
        "description": "fastapi.responses",
        "isExtraImport": true,
        "detail": "fastapi.responses",
        "documentation": {}
    },
    {
        "label": "asyncio",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "asyncio",
        "description": "asyncio",
        "detail": "asyncio",
        "documentation": {}
    },
    {
        "label": "pytz",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "pytz",
        "description": "pytz",
        "detail": "pytz",
        "documentation": {}
    },
    {
        "label": "config_db",
        "importPath": "app.db",
        "description": "app.db",
        "isExtraImport": true,
        "detail": "app.db",
        "documentation": {}
    },
    {
        "label": "requests",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "requests",
        "description": "requests",
        "detail": "requests",
        "documentation": {}
    },
    {
        "label": "logging",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "logging",
        "description": "logging",
        "detail": "logging",
        "documentation": {}
    },
    {
        "label": "asynccontextmanager",
        "importPath": "contextlib",
        "description": "contextlib",
        "isExtraImport": true,
        "detail": "contextlib",
        "documentation": {}
    },
    {
        "label": "CORSMiddleware",
        "importPath": "fastapi.middleware.cors",
        "description": "fastapi.middleware.cors",
        "isExtraImport": true,
        "detail": "fastapi.middleware.cors",
        "documentation": {}
    },
    {
        "label": "router",
        "importPath": "app.router.notification_router",
        "description": "app.router.notification_router",
        "isExtraImport": true,
        "detail": "app.router.notification_router",
        "documentation": {}
    },
    {
        "label": "router",
        "importPath": "app.router.notion_router",
        "description": "app.router.notion_router",
        "isExtraImport": true,
        "detail": "app.router.notion_router",
        "documentation": {}
    },
    {
        "label": "start_worker",
        "importPath": "app.services.notification_worker",
        "description": "app.services.notification_worker",
        "isExtraImport": true,
        "detail": "app.services.notification_worker",
        "documentation": {}
    },
    {
        "label": "stop_worker",
        "importPath": "app.services.notification_worker",
        "description": "app.services.notification_worker",
        "isExtraImport": true,
        "detail": "app.services.notification_worker",
        "documentation": {}
    },
    {
        "label": "bin_dir",
        "kind": 5,
        "importPath": ".venv.Scripts.activate_this",
        "description": ".venv.Scripts.activate_this",
        "peekOfCode": "bin_dir = os.path.dirname(abs_file)\nbase = bin_dir[: -len(\"Scripts\") - 1]  # strip away the bin part from the __file__, plus the path separator\n# prepend bin to PATH (this file is inside the bin directory)\nos.environ[\"PATH\"] = os.pathsep.join([bin_dir, *os.environ.get(\"PATH\", \"\").split(os.pathsep)])\nos.environ[\"VIRTUAL_ENV\"] = base  # virtual env is right above bin directory\nos.environ[\"VIRTUAL_ENV_PROMPT\"] = \"backend\" or os.path.basename(base)  # noqa: SIM222\n# add the virtual environments libraries to the host python import mechanism\nprev_length = len(sys.path)\nfor lib in \"..\\\\Lib\\\\site-packages\".split(os.pathsep):\n    path = os.path.realpath(os.path.join(bin_dir, lib))",
        "detail": ".venv.Scripts.activate_this",
        "documentation": {}
    },
    {
        "label": "base",
        "kind": 5,
        "importPath": ".venv.Scripts.activate_this",
        "description": ".venv.Scripts.activate_this",
        "peekOfCode": "base = bin_dir[: -len(\"Scripts\") - 1]  # strip away the bin part from the __file__, plus the path separator\n# prepend bin to PATH (this file is inside the bin directory)\nos.environ[\"PATH\"] = os.pathsep.join([bin_dir, *os.environ.get(\"PATH\", \"\").split(os.pathsep)])\nos.environ[\"VIRTUAL_ENV\"] = base  # virtual env is right above bin directory\nos.environ[\"VIRTUAL_ENV_PROMPT\"] = \"backend\" or os.path.basename(base)  # noqa: SIM222\n# add the virtual environments libraries to the host python import mechanism\nprev_length = len(sys.path)\nfor lib in \"..\\\\Lib\\\\site-packages\".split(os.pathsep):\n    path = os.path.realpath(os.path.join(bin_dir, lib))\n    site.addsitedir(path)",
        "detail": ".venv.Scripts.activate_this",
        "documentation": {}
    },
    {
        "label": "os.environ[\"PATH\"]",
        "kind": 5,
        "importPath": ".venv.Scripts.activate_this",
        "description": ".venv.Scripts.activate_this",
        "peekOfCode": "os.environ[\"PATH\"] = os.pathsep.join([bin_dir, *os.environ.get(\"PATH\", \"\").split(os.pathsep)])\nos.environ[\"VIRTUAL_ENV\"] = base  # virtual env is right above bin directory\nos.environ[\"VIRTUAL_ENV_PROMPT\"] = \"backend\" or os.path.basename(base)  # noqa: SIM222\n# add the virtual environments libraries to the host python import mechanism\nprev_length = len(sys.path)\nfor lib in \"..\\\\Lib\\\\site-packages\".split(os.pathsep):\n    path = os.path.realpath(os.path.join(bin_dir, lib))\n    site.addsitedir(path)\nsys.path[:] = sys.path[prev_length:] + sys.path[0:prev_length]\nsys.real_prefix = sys.prefix",
        "detail": ".venv.Scripts.activate_this",
        "documentation": {}
    },
    {
        "label": "os.environ[\"VIRTUAL_ENV\"]",
        "kind": 5,
        "importPath": ".venv.Scripts.activate_this",
        "description": ".venv.Scripts.activate_this",
        "peekOfCode": "os.environ[\"VIRTUAL_ENV\"] = base  # virtual env is right above bin directory\nos.environ[\"VIRTUAL_ENV_PROMPT\"] = \"backend\" or os.path.basename(base)  # noqa: SIM222\n# add the virtual environments libraries to the host python import mechanism\nprev_length = len(sys.path)\nfor lib in \"..\\\\Lib\\\\site-packages\".split(os.pathsep):\n    path = os.path.realpath(os.path.join(bin_dir, lib))\n    site.addsitedir(path)\nsys.path[:] = sys.path[prev_length:] + sys.path[0:prev_length]\nsys.real_prefix = sys.prefix\nsys.prefix = base",
        "detail": ".venv.Scripts.activate_this",
        "documentation": {}
    },
    {
        "label": "os.environ[\"VIRTUAL_ENV_PROMPT\"]",
        "kind": 5,
        "importPath": ".venv.Scripts.activate_this",
        "description": ".venv.Scripts.activate_this",
        "peekOfCode": "os.environ[\"VIRTUAL_ENV_PROMPT\"] = \"backend\" or os.path.basename(base)  # noqa: SIM222\n# add the virtual environments libraries to the host python import mechanism\nprev_length = len(sys.path)\nfor lib in \"..\\\\Lib\\\\site-packages\".split(os.pathsep):\n    path = os.path.realpath(os.path.join(bin_dir, lib))\n    site.addsitedir(path)\nsys.path[:] = sys.path[prev_length:] + sys.path[0:prev_length]\nsys.real_prefix = sys.prefix\nsys.prefix = base",
        "detail": ".venv.Scripts.activate_this",
        "documentation": {}
    },
    {
        "label": "prev_length",
        "kind": 5,
        "importPath": ".venv.Scripts.activate_this",
        "description": ".venv.Scripts.activate_this",
        "peekOfCode": "prev_length = len(sys.path)\nfor lib in \"..\\\\Lib\\\\site-packages\".split(os.pathsep):\n    path = os.path.realpath(os.path.join(bin_dir, lib))\n    site.addsitedir(path)\nsys.path[:] = sys.path[prev_length:] + sys.path[0:prev_length]\nsys.real_prefix = sys.prefix\nsys.prefix = base",
        "detail": ".venv.Scripts.activate_this",
        "documentation": {}
    },
    {
        "label": "sys.path[:]",
        "kind": 5,
        "importPath": ".venv.Scripts.activate_this",
        "description": ".venv.Scripts.activate_this",
        "peekOfCode": "sys.path[:] = sys.path[prev_length:] + sys.path[0:prev_length]\nsys.real_prefix = sys.prefix\nsys.prefix = base",
        "detail": ".venv.Scripts.activate_this",
        "documentation": {}
    },
    {
        "label": "sys.real_prefix",
        "kind": 5,
        "importPath": ".venv.Scripts.activate_this",
        "description": ".venv.Scripts.activate_this",
        "peekOfCode": "sys.real_prefix = sys.prefix\nsys.prefix = base",
        "detail": ".venv.Scripts.activate_this",
        "documentation": {}
    },
    {
        "label": "sys.prefix",
        "kind": 5,
        "importPath": ".venv.Scripts.activate_this",
        "description": ".venv.Scripts.activate_this",
        "peekOfCode": "sys.prefix = base",
        "detail": ".venv.Scripts.activate_this",
        "documentation": {}
    },
    {
        "label": "Settings",
        "kind": 6,
        "importPath": "app.constants.constants",
        "description": "app.constants.constants",
        "peekOfCode": "class Settings(BaseSettings):\n    db_user: str\n    db_password: str\n    db_name: str\n    db_host: str\n    db_port: int\n    db_schema: str = \"public\"\n    bot_token: str\n    chat_id: str\n    model_config = SettingsConfigDict()",
        "detail": "app.constants.constants",
        "documentation": {}
    },
    {
        "label": "settings",
        "kind": 5,
        "importPath": "app.constants.constants",
        "description": "app.constants.constants",
        "peekOfCode": "settings = Settings()",
        "detail": "app.constants.constants",
        "documentation": {}
    },
    {
        "label": "PricePerGramResponse",
        "kind": 6,
        "importPath": "app.constants.schemas",
        "description": "app.constants.schemas",
        "peekOfCode": "class PricePerGramResponse(BaseModel):\n    price_per_gram: float = Field(..., alias=\"pricePerGram\")\n    class Config:\n        # allow both snake_case (internal) and camelCase (external)\n        populate_by_name = True\n        orm_mode = True",
        "detail": "app.constants.schemas",
        "documentation": {}
    },
    {
        "label": "init_db",
        "kind": 2,
        "importPath": "app.db.config_db",
        "description": "app.db.config_db",
        "peekOfCode": "def init_db() -> None:\n    \"\"\"\n    Initialize database schema and all SQLModel tables.\n    \"\"\"\n    # Get our target schema\n    schema = Settings().db_schema\n    # Create a raw connection to create the schema\n    with engine.begin() as conn:\n        # Check if schema exists\n        result = conn.execute(",
        "detail": "app.db.config_db",
        "documentation": {}
    },
    {
        "label": "get_session",
        "kind": 2,
        "importPath": "app.db.config_db",
        "description": "app.db.config_db",
        "peekOfCode": "def get_session():\n    \"\"\"\n    FastAPI dependency for a per-request session.\n    \"\"\"\n    with Session(engine) as session:\n        yield session",
        "detail": "app.db.config_db",
        "documentation": {}
    },
    {
        "label": "db_url",
        "kind": 5,
        "importPath": "app.db.config_db",
        "description": "app.db.config_db",
        "peekOfCode": "db_url = (\n    f\"postgresql+psycopg2://\"\n    f\"{Settings().db_user}:{Settings().db_password}@\"\n    f\"{Settings().db_host}:{Settings().db_port}/{Settings().db_name}\"\n)\n# Create SQLModel engine (sync)\nengine = create_engine(db_url, echo=True, future=True)\ndef init_db() -> None:\n    \"\"\"\n    Initialize database schema and all SQLModel tables.",
        "detail": "app.db.config_db",
        "documentation": {}
    },
    {
        "label": "engine",
        "kind": 5,
        "importPath": "app.db.config_db",
        "description": "app.db.config_db",
        "peekOfCode": "engine = create_engine(db_url, echo=True, future=True)\ndef init_db() -> None:\n    \"\"\"\n    Initialize database schema and all SQLModel tables.\n    \"\"\"\n    # Get our target schema\n    schema = Settings().db_schema\n    # Create a raw connection to create the schema\n    with engine.begin() as conn:\n        # Check if schema exists",
        "detail": "app.db.config_db",
        "documentation": {}
    },
    {
        "label": "Base",
        "kind": 6,
        "importPath": "app.db.models",
        "description": "app.db.models",
        "peekOfCode": "class Base(SQLModel):\n    __table_args__ = {\"schema\": Settings().db_schema}\nclass Users(Base, table=True):\n    \"\"\"Store user information and integration settings.\"\"\"\n    __tablename__ = \"users\"\n    # Telegram Info (from message.from and message.chat)\n    chat_id: str = Field(primary_key=True, description=\"Telegram chat/user ID\")\n    username: Optional[str] = Field(default=None, description=\"Telegram username\")\n    first_name: Optional[str] = Field(default=None, description=\"User's first name from Telegram\")\n    language_code: Optional[str] = Field(default=None, description=\"User's language preference\")",
        "detail": "app.db.models",
        "documentation": {}
    },
    {
        "label": "Users",
        "kind": 6,
        "importPath": "app.db.models",
        "description": "app.db.models",
        "peekOfCode": "class Users(Base, table=True):\n    \"\"\"Store user information and integration settings.\"\"\"\n    __tablename__ = \"users\"\n    # Telegram Info (from message.from and message.chat)\n    chat_id: str = Field(primary_key=True, description=\"Telegram chat/user ID\")\n    username: Optional[str] = Field(default=None, description=\"Telegram username\")\n    first_name: Optional[str] = Field(default=None, description=\"User's first name from Telegram\")\n    language_code: Optional[str] = Field(default=None, description=\"User's language preference\")\n    is_bot: bool = Field(default=False, description=\"Whether the user is a bot\")\n    # Notion Integration",
        "detail": "app.db.models",
        "documentation": {}
    },
    {
        "label": "Reminders",
        "kind": 6,
        "importPath": "app.db.models",
        "description": "app.db.models",
        "peekOfCode": "class Reminders(Base, table=True):\n    __tablename__ = \"reminders\"\n    id: str = Field(default_factory=lambda: str(uuid.uuid4()), primary_key=True, index=True)\n    created_at: Optional[datetime] = Field(\n        sa_column=Column(DateTime(timezone=True), server_default=func.now(), nullable=False)\n    )\n    updated_at: Optional[datetime] = Field(\n        sa_column=Column(DateTime(timezone=True), server_default=func.now(), onupdate=func.now(), nullable=False)\n    )\n    active: bool = Field(default=True, nullable=False)",
        "detail": "app.db.models",
        "documentation": {}
    },
    {
        "label": "router",
        "kind": 5,
        "importPath": "app.router.notification_router",
        "description": "app.router.notification_router",
        "peekOfCode": "router = APIRouter(prefix=\"/notifications\", tags=[\"notifications\"])\n# Temporary in-memory state store for ongoing conversations\nuser_states = {}\n@router.get(\"/test\")\nasync def test_notification(db: Session = Depends(get_session)):\n    try:\n        send_message(settings.bot_token, settings.chat_id, \"Hi from Remindarr!\")\n        return {\"status\": \"success\", \"message\": \"Test notification sent\"}\n    except Exception as e:\n        logger.info(f\"Failed to send test notification: {e}\")",
        "detail": "app.router.notification_router",
        "documentation": {}
    },
    {
        "label": "user_states",
        "kind": 5,
        "importPath": "app.router.notification_router",
        "description": "app.router.notification_router",
        "peekOfCode": "user_states = {}\n@router.get(\"/test\")\nasync def test_notification(db: Session = Depends(get_session)):\n    try:\n        send_message(settings.bot_token, settings.chat_id, \"Hi from Remindarr!\")\n        return {\"status\": \"success\", \"message\": \"Test notification sent\"}\n    except Exception as e:\n        logger.info(f\"Failed to send test notification: {e}\")\n        return {\"status\": \"error\", \"message\": str(e)}\nfrom fastapi.responses import JSONResponse",
        "detail": "app.router.notification_router",
        "documentation": {}
    },
    {
        "label": "router",
        "kind": 5,
        "importPath": "app.router.notion_router",
        "description": "app.router.notion_router",
        "peekOfCode": "router = APIRouter(prefix=\"/notion\", tags=[\"notion\"])\n# Temporary in-memory state store for ongoing conversations\nnotion_setup_states = {}\n@router.post(\"/webhook\")\nasync def notion_webhook(request: Request, db: Session = Depends(get_session)):\n    try:\n        data = await request.json()\n        logger.info(f\"Incoming Notion webhook data: {data}\")\n        chat_id = data[\"message\"][\"chat\"][\"id\"]\n        text = data[\"message\"].get(\"text\", \"\").strip()",
        "detail": "app.router.notion_router",
        "documentation": {}
    },
    {
        "label": "notion_setup_states",
        "kind": 5,
        "importPath": "app.router.notion_router",
        "description": "app.router.notion_router",
        "peekOfCode": "notion_setup_states = {}\n@router.post(\"/webhook\")\nasync def notion_webhook(request: Request, db: Session = Depends(get_session)):\n    try:\n        data = await request.json()\n        logger.info(f\"Incoming Notion webhook data: {data}\")\n        chat_id = data[\"message\"][\"chat\"][\"id\"]\n        text = data[\"message\"].get(\"text\", \"\").strip()\n    except Exception as e:\n        logger.error(f\"Failed to parse webhook JSON: {e}\")",
        "detail": "app.router.notion_router",
        "documentation": {}
    },
    {
        "label": "start_worker",
        "kind": 2,
        "importPath": "app.services.notification_worker",
        "description": "app.services.notification_worker",
        "peekOfCode": "def start_worker(app) -> None:\n    \"\"\"Start the reminder background task. Call from an async startup handler.\"\"\"\n    # create stop event and background task\n    app.state._reminder_stop = asyncio.Event()\n    app.state._reminder_task = asyncio.create_task(_reminder_loop(app))\nasync def stop_worker(app) -> None:\n    \"\"\"Signal the worker to stop and await its completion. Call from async shutdown handler.\"\"\"\n    if not hasattr(app.state, \"_reminder_stop\"):\n        return\n    app.state._reminder_stop.set()",
        "detail": "app.services.notification_worker",
        "documentation": {}
    },
    {
        "label": "CHECK_INTERVAL_SECONDS",
        "kind": 5,
        "importPath": "app.services.notification_worker",
        "description": "app.services.notification_worker",
        "peekOfCode": "CHECK_INTERVAL_SECONDS = 60  # how often to poll for due reminders\nasync def _reminder_loop(app) -> None:\n    \"\"\"Background loop: query due reminders, send messages, reschedule.\"\"\"\n    engine = config_db.engine\n    # use a stop event stored on the app state to allow graceful shutdown\n    stop_event: asyncio.Event = app.state._reminder_stop\n    while not stop_event.is_set():\n        try:\n            utc_now = datetime.datetime.now(pytz.UTC)\n            # Use a DB session to select due reminders and lock rows to avoid double-processing",
        "detail": "app.services.notification_worker",
        "documentation": {}
    },
    {
        "label": "send_message",
        "kind": 2,
        "importPath": "app.services.telegram",
        "description": "app.services.telegram",
        "peekOfCode": "def send_message(bot_token: str, chat_id: str, message: str) -> None:\n    url = f\"https://api.telegram.org/bot{bot_token}/sendMessage\"\n    payload = {\n        \"chat_id\": chat_id,\n        \"text\": message\n    }\n    response = requests.post(url, json=payload)\n    response.raise_for_status()  # Raise an error for bad responses",
        "detail": "app.services.telegram",
        "documentation": {}
    },
    {
        "label": "logger",
        "kind": 5,
        "importPath": "app.utils.logging_utils",
        "description": "app.utils.logging_utils",
        "peekOfCode": "logger = logging.getLogger(\"uvicorn.error\")\n# let default be INFO\nlogger.setLevel(logging.INFO)",
        "detail": "app.utils.logging_utils",
        "documentation": {}
    },
    {
        "label": "parse_time_unit",
        "kind": 2,
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "peekOfCode": "def parse_time_unit(unit_text: str) -> Tuple[Optional[int], Optional[str]]:\n    \"\"\"Convert user input time unit to multiplier and normalized unit name.\n    Returns (multiplier_in_minutes, normalized_unit_name) or (None, None) if\n    the unit isn't recognized.\n    \"\"\"\n    unit = unit_text.strip().lower()\n    if unit in (\"m\", \"min\", \"mins\", \"minute\", \"minutes\"):\n        return 1, \"minutes\"\n    elif unit in (\"h\", \"hr\", \"hrs\", \"hour\", \"hours\"):\n        return 60, \"hours\"",
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "get_user_timezone",
        "kind": 2,
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "peekOfCode": "def get_user_timezone(tz_name: Optional[str]):\n    \"\"\"Return a timezone object (ZoneInfo) or UTC on error/None.\"\"\"\n    if not tz_name:\n        return ZoneInfo(\"UTC\") if ZoneInfo else timezone.utc\n    try:\n        return ZoneInfo(tz_name) if ZoneInfo else timezone.utc\n    except ZoneInfoNotFoundError:\n        return ZoneInfo(\"UTC\") if ZoneInfo else timezone.utc\ndef get_time_in_timezone(dt: datetime, tz_name: Optional[str]) -> datetime:\n    \"\"\"Convert a naive or UTC datetime to the user's timezone.",
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "get_time_in_timezone",
        "kind": 2,
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "peekOfCode": "def get_time_in_timezone(dt: datetime, tz_name: Optional[str]) -> datetime:\n    \"\"\"Convert a naive or UTC datetime to the user's timezone.\n    The returned datetime will have tzinfo set to the user's tz.\n    \"\"\"\n    if dt.tzinfo is None:\n        # assume naive datetimes are UTC\n        dt = dt.replace(tzinfo=timezone.utc)\n    user_tz = get_user_timezone(tz_name)\n    return dt.astimezone(user_tz)\ndef now_in_timezone(tz_name: Optional[str]) -> Tuple[datetime, datetime]:",
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "now_in_timezone",
        "kind": 2,
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "peekOfCode": "def now_in_timezone(tz_name: Optional[str]) -> Tuple[datetime, datetime]:\n    \"\"\"Return (utc_now, local_now) where local_now is utc_now in user's tz.\"\"\"\n    utc_now = datetime.now(timezone.utc)\n    user_tz = get_user_timezone(tz_name)\n    local_now = utc_now.astimezone(user_tz)\n    return utc_now, local_now\ndef format_datetime_for_user(dt: datetime, tz_name: Optional[str]) -> str:\n    \"\"\"Format datetime in user's timezone for display.\"\"\"\n    local_dt = get_time_in_timezone(dt, tz_name)\n    tz_abbr = local_dt.tzname() or \"UTC\"",
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "format_datetime_for_user",
        "kind": 2,
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "peekOfCode": "def format_datetime_for_user(dt: datetime, tz_name: Optional[str]) -> str:\n    \"\"\"Format datetime in user's timezone for display.\"\"\"\n    local_dt = get_time_in_timezone(dt, tz_name)\n    tz_abbr = local_dt.tzname() or \"UTC\"\n    return f\"{local_dt.strftime('%Y-%m-%d %H:%M')} {tz_abbr}\"\ndef calculate_next_trigger(\n    amount: int,\n    multiplier: int,\n    is_recurring: bool,\n    timezone: Optional[str] = None,",
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "calculate_next_trigger",
        "kind": 2,
        "importPath": "app.utils.time_utils",
        "description": "app.utils.time_utils",
        "peekOfCode": "def calculate_next_trigger(\n    amount: int,\n    multiplier: int,\n    is_recurring: bool,\n    timezone: Optional[str] = None,\n) -> Tuple[Optional[int], datetime]:\n    \"\"\"Calculate interval_minutes and next_trigger_at in UTC.\n    - amount: numeric amount in the chosen unit\n    - multiplier: minutes per unit (e.g. 60 for hours)\n    - is_recurring: whether the reminder should repeat",
        "detail": "app.utils.time_utils",
        "documentation": {}
    },
    {
        "label": "app",
        "kind": 5,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "app = FastAPI()\nimport app.db.config_db as config_db\nfrom app.router.notification_router import router as notification_router\nfrom app.router.notion_router import router as notion_router\nfrom app.services.notification_worker import start_worker, stop_worker\n@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    # initialize DB\n    config_db.init_db()\n    # start background reminder worker",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "app",
        "kind": 5,
        "importPath": "main",
        "description": "main",
        "peekOfCode": "app = FastAPI(lifespan=lifespan)\n# CORS - allow your frontend (adjust origins)\napp.add_middleware(CORSMiddleware,\n                   allow_origins=[\"http://localhost:3000\", \"http://127.0.0.1:3000\", \"http://your-nas-ip:port\"],\n                   allow_credentials=True, allow_methods=[\"*\"], allow_headers=[\"*\"], )\n# Mount routers under /api so frontend's API_BASE_URL + paths match\napp.include_router(notification_router, prefix=\"/api\")\napp.include_router(notion_router, prefix=\"/api\")\n# basic healthcheck\n@app.get(\"/health\")",
        "detail": "main",
        "documentation": {}
    },
    {
        "label": "test_one_time_reminder",
        "kind": 2,
        "importPath": "test_time_utils",
        "description": "test_time_utils",
        "peekOfCode": "def test_one_time_reminder():\n    # One-time reminder in 30 minutes\n    interval, next_time = calculate_next_trigger(30, 1, is_recurring=False)\n    assert interval is None, \"One-time reminder should have no interval\"\n    assert isinstance(next_time, datetime), \"Should return a datetime\"\ndef test_recurring_reminder():\n    # Recurring reminder every 2 hours\n    interval, next_time = calculate_next_trigger(2, 60, is_recurring=True)\n    assert interval == 120, \"Should be 120 minutes (2 hours)\"\n    assert isinstance(next_time, datetime), \"Should return a datetime\"",
        "detail": "test_time_utils",
        "documentation": {}
    },
    {
        "label": "test_recurring_reminder",
        "kind": 2,
        "importPath": "test_time_utils",
        "description": "test_time_utils",
        "peekOfCode": "def test_recurring_reminder():\n    # Recurring reminder every 2 hours\n    interval, next_time = calculate_next_trigger(2, 60, is_recurring=True)\n    assert interval == 120, \"Should be 120 minutes (2 hours)\"\n    assert isinstance(next_time, datetime), \"Should return a datetime\"\ndef test_parse_units():\n    # Test various unit inputs\n    assert parse_time_unit(\"minutes\") == (1, \"minutes\")\n    assert parse_time_unit(\"hours\") == (60, \"hours\")\n    assert parse_time_unit(\"days\") == (60 * 24, \"days\")",
        "detail": "test_time_utils",
        "documentation": {}
    },
    {
        "label": "test_parse_units",
        "kind": 2,
        "importPath": "test_time_utils",
        "description": "test_time_utils",
        "peekOfCode": "def test_parse_units():\n    # Test various unit inputs\n    assert parse_time_unit(\"minutes\") == (1, \"minutes\")\n    assert parse_time_unit(\"hours\") == (60, \"hours\")\n    assert parse_time_unit(\"days\") == (60 * 24, \"days\")\n    assert parse_time_unit(\"invalid\") == (None, None)\nif __name__ == \"__main__\":\n    print(\"Running time utility tests...\")\n    print(\"1. Testing one-time reminder...\")\n    test_one_time_reminder()",
        "detail": "test_time_utils",
        "documentation": {}
    }
]